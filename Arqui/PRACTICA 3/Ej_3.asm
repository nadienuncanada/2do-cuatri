a-
DATO EQU  40H
ESTADO EQU 41H


ORG 1000H
CADENA DB "HOLIS"
FIN DB 0
ORG 2000H

MOV BX, OFFSET CADENA
;CONFIG HANDSHAKE
IN AL, ESTADO
OR AL, 0H
OUT ESTADO,AL


LOOPEAR: MOV AL, [BX]
 OUT DATO, AL
 INC BX
 CMP BX, OFFSET FIN
 JNZ LOOPEAR
INT 0
END
------------------------------
c- 
DATO EQU  40H
ESTADO EQU 41H
EOI EQU 20H
IMR EQU 21H
INT2 EQU 26H

ORG 20
IP_INT2 DW IMPRIMIR
ORG 1000H
CADENA DB "UNI"
FIN DB 0

ORG 3000H
IMPRIMIR: MOV AL,[BX]
OUT DATO,AL
INC BX
CMP BX, OFFSET FIN
JNZ IMPRIMIR
MOV AL,0FFH; EL DE IN ESTADO Y APLICARLE AND NO FUNCIONA COMENTAAAR
OUT IMR, AL
MOV AL, 20H
OUT EOI, AL
IRET
ORG 2000H
;CONFIG PIC
CLI
MOV AL, 11111011B; activamos la int de handshake
OUT IMR, AL

MOV AL,5
OUT INT2, AL;direc de la interrupcion 

STI
MOV BX, OFFSET CADENA

IN AL, ESTADO
OR AL, 80H
OUT ESTADO,AL

LOOPEAR: CMP BX, OFFSET FIN
JNZ LOOPEAR


INT 0
END
--------------------------
d-
DATO EQU 40H
ESTADO EQU 41H

ORG 1000H
CAR DB ?
ORG 3000H
 
POLLING: IN AL,ESTADO
AND AL,1
JNZ POLLING
CMP CL,0
JZ SEGU

MOV AL,[BX]
OUT DATO, AL
INC BX
DEC CL
JNZ POLLING

SEGU: DEC BX
MOV AL,[BX] 
OUT DATO, AL
DEC CH
JNZ POLLING
RET

ORG 2000H
IN AL,ESTADO; DESACTIVAMOS INTS DE HANDSHAKE
AND AL, 7FH
OUT ESTADO,AL
MOV CL,2
MOV BX, OFFSET CAR
L: INT 6
INC BX
DEC CL
JNZ L

MOV BX, OFFSET CAR
MOV CL,2
MOV CH, 2

CALL POLLING
INT 0
END

----------------------------------------
C- VERSION 2.0
DATO EQU 40H
ESTADO EQU 41H
IMR EQU 21H
EOI EQU 20H
INT2 EQU 26H
ORG 1000H
MSJ DB "UNIVERSIDAD NACIONAL DE LA PLATA"
FIN DB ?
ORG 40
DEAQUI DW AQUI
ORG 3000H
AQUI:  CMP BX,OFFSET FIN
         JZ FINNN
MOV AL,[BX]
    OUT DATO,AL;printea

    INC BX;avanza en la cadena
    
MOV AL,20H
OUT EOI,AL
IRET

ORG 2000H
MOV BX,OFFSET MSJ;le pasamos lo que tiene q printear
CLI

MOV AL, 11111011B; acitvamos las interrupciones de HANDSHAKE
OUT IMR,AL

IN AL,ESTADO
OR AL,80H; ponemos en 1 el bit mas signi de estado para que sepa que va  funcionar por interrupciones
OUT ESTADO,AL

MOV AL,10; 10*4 va a ir a org 40
OUT INT2,AL

STI

LOOPEAR: CMP BX,OFFSET FIN
         JZ FINNN
    IN AL,ESTADO
    AND AL,1
    JNZ LOOPEAR
    
FINNN: INT 0
END
